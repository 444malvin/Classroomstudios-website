<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classroom Studios â€” Coming Soon</title>
<link href="https://fonts.googleapis.com/css2?family=Caveat&display=swap" rel="stylesheet">
<style>
body, html {
  margin: 0;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  background: #0f2b19;
  font-family: 'Caveat', cursive;
  overflow: hidden;
}
.board {
  position: relative;
  width: 90vw;
  max-width: 900px;
  height: 60vh;
  background: #123c23;
  border-radius: 20px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.5), inset 0 0 50px rgba(0,0,0,0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}
.text {
  font-size: 3em;
  color: #fff;
  white-space: pre-wrap;
  text-align: center;
  opacity: 0;
}
.duster {
  position: absolute;
  bottom: 0;
  left: -100%;
  width: 120%;
  height: 60px;
  background: #123c23;
  z-index: 10;
}
.dust {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: #fff;
  filter: blur(1px);
  opacity: 0;
}
</style>
</head>
<body>
<div class="board">
  <div class="text" id="chalkText">Classroom Studios\nfrom Malvin & Noku\nComing Soon</div>
  <div class="duster" id="duster"></div>
</div>
<script>
const chalkText = document.getElementById('chalkText');
const duster = document.getElementById('duster');
const lines = chalkText.textContent.split('\\n');
chalkText.textContent = '';
const dusts = [];

function spawnDust(x,y){
  const dust = document.createElement('div');
  dust.className = 'dust';
  dust.style.left = x+'px';
  dust.style.top = y+'px';
  document.body.appendChild(dust);
  dusts.push(dust);
  dust.animate([{opacity:1, transform:'scale(1)'},{opacity:0, transform:'scale(0.3)'}], {duration:600, easing:'ease-out'});
  setTimeout(()=>{dust.remove();},600);
}

async function writeText(){
  for(let line of lines){
    for(let i=0;i<=line.length;i++){
      chalkText.textContent = lines.slice(0,lines.indexOf(line)).join('\\n') + '\\n' + line.slice(0,i);
      const rect = chalkText.getBoundingClientRect();
      spawnDust(rect.left + Math.random()*rect.width, rect.top + Math.random()*rect.height);
      await new Promise(r=>setTimeout(r,60));
    }
    await new Promise(r=>setTimeout(r,300));
  }
}

function wipeBoard(){
  return new Promise(r=>{
    duster.style.transition = 'transform 1.5s ease, opacity 0.3s ease';
    duster.style.opacity = 1;
    duster.style.transform = 'translateX(100vw)';
    setTimeout(()=>{
      chalkText.textContent = '';
      duster.style.transition = '';
      duster.style.transform = 'translateX(-100%)';
      duster.style.opacity = 0;
      r();
    },1500);
  });
}

async function loop(){
  while(true){
    await writeText();
    await new Promise(r=>setTimeout(r,600));
    await wipeBoard();
    await new Promise(r=>setTimeout(r,500));
  }
}

loop();
</script>
</body>
</html>
